<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task 6</title>
</head>

<body>
  <!-- Задача 6. Користувач задає кількість оцінок і натискає на кнопку «get table». В результаті формується таблиця з input,
  куди користувач вводить оцінки. Після цього натискає на кнопку “get sum” і знаходить середнє значення. -->
  <label>
    Price number
    <input id="userNum" type="text" placeholder="Enter the amount" value="">
  </label>
  <br>
  <button type="button">get table</button>
  <hr>
  <script>
    function createTable() {
      if (document.getElementById('tableContainer')) return
      const amount = document.getElementById('userNum').value
      const br = document.createElement('br')
      const hr = document.createElement('hr')
      const div = document.createElement('div')
      div.id = 'tableContainer'
      for (let i = 0; i < amount; i++) {
        document.body.append(div)
        const inputs = document.createElement('input')
        inputs.setAttribute('type', 'text')
        inputs.placeholder = `Enter the amount ${i + 1}`
        inputs.setAttribute('value', ' ')
        inputs.classList.add('userAnswer')
        div.append(inputs)
        div.prepend(hr)
      }
      const button = document.createElement('button')
      button.setAttribute('type', 'button')
      button.innerText = 'get sum'
      button.onclick = getMiddleAvarage
      div.append(br)
      div.append(button)
      div.append(hr)
      function getMiddleAvarage() {
        const totalUserAnswer = document.querySelectorAll('.userAnswer')
        let sum = 0
        const result = totalUserAnswer.forEach((el) => { sum += parseInt(el.value) || 0 })
        let total = sum / totalUserAnswer.length
        const resultText = document.createElement('p')
        resultText.innerText = `середнє значення = ${total.toFixed(1)}`
        div.append(resultText)
      }
    }

    document.querySelector('button').onclick = createTable

  </script>

</body>

</html>